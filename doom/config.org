#+title: Config
#+PROPERTY: header-args emacs-lisp :tangle yes

#+BEGIN_SRC emacs-lisp
 (setq
 doom-font (font-spec :family "FantasqueSansM Nerd Font" :size 18 :weight 'regular)
 doom-theme 'doom-one
 display-line-numbers-type t

 projectile-project-search-path '("~/code/" "~/code/mopho/"))

;; Mermaid setup
(use-package! ob-mermaid
  :config
  (setq ob-mermaid-cli-path "mmdc")) ; adjust path

;; PlantUML setup
(use-package! plantuml-mode
  :config
  (setq plantuml-executable-path "plantuml")
  (setq plantuml-default-exec-mode 'executable))

;; Excalidraw setup
(use-package! org-excalidraw)

;; Enable babel languages
(org-babel-do-load-languages
 'org-babel-load-languages
 '((mermaid . t)
   (plantuml . t)
   (dot . t)))

(after! org
  (setq org-directory "~/org")
  (setq epa-file-encrypt-to '("mike@mcarlin.com"))
  (setq epa-file-select-keys nil)
  (setq epa-file-cache-passphrase-for-symmetric-encryption t))

#+END_SRC

#+BEGIN_SRC emacs-lisp
(after! org-journal
  (setq org-journal-dir "~/org/")
  (setq org-journal-file-type 'yearly)
  (setq org-journal-file-format "journal.org.gpg")

  ;; Journal entry format
  (setq org-journal-date-format "%A, %B %d, %Y")
  (setq org-journal-time-format "%I:%M %p "))

;; Add this temporarily to debug
(after! org-journal
  (message "Journal dir: %s" org-journal-dir)
  (message "Journal file: %s" org-journal-file-format)
  (message "Full path: %s"
           (expand-file-name org-journal-file-format org-journal-dir)))
#+END_SRC
